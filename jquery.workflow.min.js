(function(d){var e={init:function(a){var b=d(this);b.data("workflow",{target:b,workflow:workflow,config:a});d(document).on("change",".workflow-opt",function(){var a=1*d(this).attr("id").replace(/workflow-opt-/,"");console.log("changed level "+a+" to "+d(this).val());var c=d("#workflow-data-"+a);c.html("");e.display(c,e.getConfig(b,1+a),1+a)});e.display(this,a,0);return b},destroy:function(){var a=d(this);d(window).unbind(".workflow");a.data("workflow").workflow.remove();a.removeData("workflow")},
display:function(a,b,d){b.html&&a.append(b.html);if(b.options){var c;c='<select class="workflow-opt" id="workflow-opt-'+d+'">'+("<option>"+("string"==typeof b.dflt?b.dflt:"")+"</option>");for(item in b.options)c+='<option value="'+item+'">'+b.options[item].option+"</option>";c+="</select>";c+='<div id="workflow-data-'+d+'"></div>';a.append(c)}},getConfig:function(a,b){console.log("getConfig("+b+")");for(var e=a.data("workflow").config,c=0;c<b;){var f=d("#workflow-opt-"+c++).val();console.log("opt = "+
f);e=e.options[f]}console.log(JSON.stringify(e));return e}};d.fn.workflow=function(a){if(e[a])return e[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return e.init.apply(this,arguments);d.error("Method "+a+" does not exist on jQuery.workflow")}})(jQuery);
